<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ESP32-OTA-Updater: ESP32 Over The Air Updater</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ESP32-OTA-Updater
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ESP32 Over The Air Updater </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__2home_2runner_2work_2ESP32-OTA-Updater_2ESP32-OTA-Updater_2README"></a> This library provides a simple solution for performing Over-The-Air (OTA) updates on ESP32 devices using the Arduino framework. It integrates with GitHub CI/CD workflows to automate firmware updates using PlatformIO.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Quick Start</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
PlatformIO</h2>
<p>To get started with the ESP32 Over The Air Updater using PlatformIO, follow these steps:</p>
<ol type="1">
<li><b>Install PlatformIO</b>: If you haven't already, install PlatformIO IDE for your preferred code editor (VSCode, Atom, etc.). You can find the installation instructions <a href="https://platformio.org/install">here</a>.</li>
<li><b>Create a New Project</b>:<ul>
<li>Open PlatformIO IDE.</li>
<li>Click on <code>New Project</code>.</li>
<li>Enter your project name, select <code>Espressif 32</code> as the board, and choose the appropriate ESP32 board model.</li>
<li>Click <code>Finish</code>.</li>
</ul>
</li>
<li><b>Add the Library</b>:<ul>
<li>Open the <code>platformio.ini</code> file in your project.</li>
<li>The settings in this file are also important for the Github Action to compile your project.</li>
<li>Add the following lines to include the ESP32 OTA Updater library: <div class="fragment"><div class="line">[env:esp32dev]</div>
<div class="line">platform = espressif32</div>
<div class="line">board = esp32dev</div>
<div class="line">framework = arduino</div>
<div class="line"># Add the &#39;ESP32-OTA-Updater&#39; library to the project.</div>
<div class="line">lib_deps =</div>
<div class="line">  https://github.com/IgnyteX-Labs/ESP32-OTA-Updater</div>
</div><!-- fragment --></li>
</ul>
</li>
<li><p class="startli"><b>Implement OTA Update</b>:</p>
<p class="startli">To implement the OTA update functionality, follow these steps:</p>
</li>
</ol>
<h3><a class="anchor" id="autotoc_md3"></a>
Include Libraries and Define Variables</h3>
<p>First, include the necessary libraries and define the required global variables: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;Arduino.h&gt;</span> <span class="comment">// Remove this import when using Arduino IDE</span></div>
<div class="line"><span class="preprocessor">#include &lt;WiFi.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ESP32_OTA_Updater.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define the GitHub repository details</span></div>
<div class="line"><span class="preprocessor">#define OWNER &quot;github_username&quot;</span></div>
<div class="line"><span class="preprocessor">#define REPO &quot;github_repo&quot;</span></div>
<div class="line"><span class="preprocessor">#define FIRMWARE &quot;firmware.bin&quot;</span></div>
<div class="line"><span class="preprocessor">#define GITHUB_ACCESS_TOKEN &quot;finegrained_gh_token&quot; </span><span class="comment">// Optional</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create ota instance with ssl cert and current semantic version</span></div>
<div class="line"><a class="code hl_class" href="classESP32__OTA__Updater.html">ESP32_OTA_Updater</a> ota(ROOT_CA_CERTIFICATE_GITHUB, PROJ_GIT_TAG);</div>
<div class="ttc" id="aclassESP32__OTA__Updater_html"><div class="ttname"><a href="classESP32__OTA__Updater.html">ESP32_OTA_Updater</a></div><div class="ttdoc">Class for performing Over-The-Air (OTA) updates on ESP32 devices, with Github Actions and Releases.</div><div class="ttdef"><b>Definition</b> ESP32_OTA_Updater.h:27</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md4"></a>
Setup Function</h3>
<p>In the <code>setup</code> function, initialize the WiFi connection and the OTA updater: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">    WiFi.begin(<span class="stringliteral">&quot;SSID&quot;</span>, <span class="stringliteral">&quot;PASSWORD&quot;</span>);</div>
<div class="line">    <span class="keywordflow">while</span> (WiFi.status() != WL_CONNECTED) {</div>
<div class="line">        delay(1000);</div>
<div class="line">        Serial.println(<span class="stringliteral">&quot;Connecting to WiFi..&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    Serial.println(<span class="stringliteral">&quot;Connected to WiFi&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// (Optional)</span></div>
<div class="line">    ota.setDebug(&amp;Serial); <span class="comment">// for debug output to serial</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!ota.begin(OWNER, REPO, FIRMWARE,  GITHUB_ACCESS_TOKEN)) {</div>
<div class="line">        Serial.printf(<span class="stringliteral">&quot;OTA Updater init failed: %d, %s\n&quot;</span>, ota.getErrorCode(), ota.getErrorDescription());</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        Serial.println(<span class="stringliteral">&quot;OTA Updater initialized&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md5"></a>
Loop Function</h3>
<p>In the <code>loop</code> function, check for available updates and install them if found: <code>cpp void loop() { if (ota.available()) { if (!ota.downloadAndInstall()) { Serial.printf("OTA update failed: %d, %s\n", ota.getErrorCode(), ota.getErrorDescription()); } // Perform any pre-reboot tasks here ota.reboot(); } } </code></p>
<ol type="1">
<li><b>Upload Your Code</b>:<ul>
<li>Connect your ESP32 board to your computer.</li>
<li>Click on the <code>Upload</code> button in PlatformIO to upload your code to the ESP32.</li>
<li>This step is only required for the initial upload. Subsequent updates can be done over the air (OTA).</li>
</ul>
</li>
<li><b>Trigger OTA Update</b>:<ul>
<li>Once your code is running on the ESP32, you can trigger an OTA update by pushing a new firmware version to your GitHub repository.</li>
<li>The ESP32 will automatically check for updates and install the new firmware.</li>
</ul>
</li>
</ol>
<p>That's it! You've successfully set up OTA updates for your ESP32 using PlatformIO.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Documentation</h1>
<p>For detailed documentation and usage instructions, please refer to the <a href="https://ignytex-labs.github.io/ESP32-OTA-Updater/">Doxygen documentation</a> of this project. It provides comprehensive information on the library's functions to help you integrate OTA updates and Github CI seamlessly into your ESP32 projects. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
